<!DOCTYPE html><html class="default" lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>@microsoft/dynamicproto-js</title><meta name="description" content="Documentation for @microsoft/dynamicproto-js"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script async src="assets/search.js" id="search-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os"</script><header class="tsd-page-toolbar">
<div class="tsd-toolbar-contents container">
<div class="table-cell" id="tsd-search" data-base=".">
<div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M15.7824 13.833L12.6666 10.7177C12.5259 10.5771 12.3353 10.499 12.1353 10.499H11.6259C12.4884 9.39596 13.001 8.00859 13.001 6.49937C13.001 2.90909 10.0914 0 6.50048 0C2.90959 0 0 2.90909 0 6.49937C0 10.0896 2.90959 12.9987 6.50048 12.9987C8.00996 12.9987 9.39756 12.4863 10.5008 11.6239V12.1332C10.5008 12.3332 10.5789 12.5238 10.7195 12.6644L13.8354 15.7797C14.1292 16.0734 14.6042 16.0734 14.8948 15.7797L15.7793 14.8954C16.0731 14.6017 16.0731 14.1267 15.7824 13.833ZM6.50048 10.499C4.29094 10.499 2.50018 8.71165 2.50018 6.49937C2.50018 4.29021 4.28781 2.49976 6.50048 2.49976C8.71001 2.49976 10.5008 4.28708 10.5008 6.49937C10.5008 8.70852 8.71314 10.499 6.50048 10.499Z" fill="var(--color-text)"></path></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div>
<div class="field">
<div id="tsd-toolbar-links"></div></div>
<ul class="results">
<li class="state loading">Preparing search index...</li>
<li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">@microsoft/dynamicproto-js</a></div>
<div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><rect x="1" y="3" width="14" height="2" fill="var(--color-text)"></rect><rect x="1" y="7" width="14" height="2" fill="var(--color-text)"></rect><rect x="1" y="11" width="14" height="2" fill="var(--color-text)"></rect></svg></a></div></div></header>
<div class="container container-main">
<div class="col-8 col-content">
<div class="tsd-page-title">
<h2>@microsoft/dynamicproto-js</h2></div>
<div class="tsd-panel tsd-typography">
<a href="#dynamic-proto-javascript" id="dynamic-proto-javascript" style="color: inherit; text-decoration: none;">
  <h1>Dynamic Proto JavaScript</h1>
</a>
<p>Generates dynamic prototype methods for JavaScript objects (classes) by supporting method definition within their &quot;class&quot; constructor (like an instance version), this removes the need to expose internal properties on the instance (this) and the usage of <code>ClassName.prototype.funcName()</code> both of which result in better code minfication (smaller output) and therefore improved load times for your users.</p>
<p>The dynamically generated prototype methods support class inheritance of any type, which means you can extend from base classes that use instance or prototype defined methods, you also don&#39;t need to add the normal boiler plate code to handle detecting, saving and calling any previous instance methods that you are overriding as support for this is provided automatically. </p>
<p>So whether creating a new class or extending some other class/code, your resulting code, can be successfully extended via TypeScript or JavaScript.</p>
<blockquote>
<p>ES3 / IE8 support has been removed from Version 2.x.</p>
<p>if you need to retain ES3 / IE8 support then you will need to use one of the 1.x versions which is now maintained on the old <a href="https://github.com/microsoft/DynamicProto-JS/tree/master">master branch</a></p>
</blockquote>
<p>The version 2.x is maintained on the default <a href="https://github.com/microsoft/DynamicProto-JS/tree/main">main branch</a></p>

<a href="#documentation" id="documentation" style="color: inherit; text-decoration: none;">
  <h2>Documentation</h2>
</a>
<p><a href="https://microsoft.github.io/DynamicProto-JS/">Github Documentation</a> includes <a href="https://microsoft.github.io/DynamicProto-JS/typedoc/index.html">typedoc API references</a>.</p>

<a href="#removing--hiding-internal-properties-from-instance" id="removing--hiding-internal-properties-from-instance" style="color: inherit; text-decoration: none;">
  <h2>Removing / Hiding internal properties from instance</h2>
</a>
<p>By defining the properties / methods within the constructors closure, each instance can contain or define internal state in the form of properties which it does not have to expose publically as each defined &quot;public&quot; instance method has direct access to this define state within the context/scope of the closure method. </p>
<p>While this does require some additional CPU and memory at the point of creating each instance object this is designed to be as minimal as possible and should be outwayed by the following advantages :-</p>
<ul>
<li>Avoids polluting the instance (this) namespace with internal values that can cause issues with inheritence for base/super classes or even derived classes that extend your class.</li>
<li>Smaller code as the internal properties and methods when defined within the instance can be minified.</li>
<li>As the resulting generated code can be better minified this <em>should</em> result in a smaller minified result and therefore better load times for your users.</li>
</ul>

<a href="#basic-usage" id="basic-usage" style="color: inherit; text-decoration: none;">
  <h2>Basic Usage</h2>
</a>
<pre><code class="language-typescript"><span class="hl-0">import</span><span class="hl-1"> </span><span class="hl-2">dynamicProto</span><span class="hl-1"> </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&quot;@microsoft/dynamicproto-js&quot;</span><span class="hl-1">;</span><br/><span class="hl-4">class</span><span class="hl-1"> </span><span class="hl-5">ExampleClass</span><span class="hl-1"> </span><span class="hl-4">extends</span><span class="hl-1"> </span><span class="hl-5">BaseClass</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">constructor</span><span class="hl-1">() {</span><br/><span class="hl-1">        </span><span class="hl-6">dynamicProto</span><span class="hl-1">(</span><span class="hl-2">ExampleClass</span><span class="hl-1">, </span><span class="hl-4">this</span><span class="hl-1">, (</span><span class="hl-2">_self</span><span class="hl-1">, </span><span class="hl-2">base</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-7">// This will define a function that will be converted to a prototype function</span><br/><span class="hl-1">            </span><span class="hl-2">_self</span><span class="hl-1">.</span><span class="hl-6">newFunc</span><span class="hl-1"> = () </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">                </span><span class="hl-7">// Access any &quot;this&quot; instance property  </span><br/><span class="hl-1">                </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">_self</span><span class="hl-1">.</span><span class="hl-2">someProperty</span><span class="hl-1">) {</span><br/><span class="hl-1">                    ...</span><br/><span class="hl-1">                }</span><br/><span class="hl-1">            }</span><br/><span class="hl-1">            </span><span class="hl-7">// This will define a function that will be converted to a prototype function</span><br/><span class="hl-1">            </span><span class="hl-2">_self</span><span class="hl-1">.</span><span class="hl-6">myFunction</span><span class="hl-1"> = () </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">                </span><span class="hl-7">// Access any &quot;this&quot; instance property</span><br/><span class="hl-1">                </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">_self</span><span class="hl-1">.</span><span class="hl-2">someProperty</span><span class="hl-1">) {</span><br/><span class="hl-1">                    </span><span class="hl-7">// Call the base version of the function that we are overriding</span><br/><span class="hl-1">                    </span><span class="hl-2">base</span><span class="hl-1">.</span><span class="hl-6">myFunction</span><span class="hl-1">();</span><br/><span class="hl-1">                }</span><br/><span class="hl-1">                ...</span><br/><span class="hl-1">            }</span><br/><span class="hl-1">            </span><span class="hl-2">_self</span><span class="hl-1">.</span><span class="hl-6">initialize</span><span class="hl-1"> = () </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">                ...</span><br/><span class="hl-1">            }</span><br/><span class="hl-1">            </span><span class="hl-7">// Warnings: While the following will work as _self is simply a reference to</span><br/><span class="hl-1">            </span><span class="hl-7">// this, if anyone overrides myFunction() the overridden will be called first</span><br/><span class="hl-1">            </span><span class="hl-7">// as the normal JavaScript method resolution will occur and the defined</span><br/><span class="hl-1">            </span><span class="hl-7">// _self.initialize() function is actually gets removed from the instance and</span><br/><span class="hl-1">            </span><span class="hl-7">// a proxy prototype version is created to reference the created method.</span><br/><span class="hl-1">            </span><span class="hl-2">_self</span><span class="hl-1">.</span><span class="hl-6">initialize</span><span class="hl-1">();</span><br/><span class="hl-1">        });</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">}</span>
</code></pre>

<a href="#build-amp-test-this-repo" id="build-amp-test-this-repo" style="color: inherit; text-decoration: none;">
  <h2>Build &amp; Test this repo</h2>
</a>
<ol>
<li><p>Install all dependencies</p>
<pre><code class="language-sh"><span class="hl-1">npm </span><span class="hl-3">install</span><br/><span class="hl-1">npm </span><span class="hl-3">install</span><span class="hl-1"> </span><span class="hl-3">-g</span><span class="hl-1"> </span><span class="hl-3">@microsoft/rush</span>
</code></pre>
</li>
<li><p>Navigate to the root folder and update rush dependencies</p>
<pre><code class="language-sh"><span class="hl-1">rush </span><span class="hl-3">update</span>
</code></pre>
</li>
<li><p>Build, lint, create docs and run tests</p>
<pre><code class="language-sh"><span class="hl-1">rush </span><span class="hl-3">build</span><br/><span class="hl-1">npm </span><span class="hl-3">run</span><span class="hl-1"> </span><span class="hl-3">test</span>
</code></pre>
</li>
</ol>
<p>If you are changing package versions or adding/removing any package dependencies, run<br><strong><code>rush update --purge --recheck --full</code></strong><br>before building. Please check-in any files that change under common\ folder.</p>

<a href="#performance" id="performance" style="color: inherit; text-decoration: none;">
  <h2>Performance</h2>
</a>
<p>The minified version of this adds a negligible amount of code and loadtime to your source code and by using this library, your generated code can be better minified as it removes most references of Classname.prototype.XXX methods from the generated code.</p>
<blockquote>
<p>Summary:</p>
<ul>
<li><strong>~2 KB</strong> minified (uncompressed)</li>
</ul>
</blockquote>

<a href="#example-usage-and-resulting-minified-code" id="example-usage-and-resulting-minified-code" style="color: inherit; text-decoration: none;">
  <h2>Example usage and resulting minified code</h2>
</a>
<p>In this first example of code that is typically emitted by TypeScript it contains several references to the Classname.prototype and &quot;this&quot; references, both of which cannot be minfied.</p>
<pre><code class="language-Javascript"><span class="hl-4">var</span><span class="hl-1"> </span><span class="hl-2">NormalClass</span><span class="hl-1"> = </span><span class="hl-7">/** </span><span class="hl-4">@class</span><span class="hl-7"> */</span><span class="hl-1"> (</span><span class="hl-4">function</span><span class="hl-1"> () {</span><br/><span class="hl-1">    </span><span class="hl-4">function</span><span class="hl-1"> </span><span class="hl-6">NormalClass</span><span class="hl-1">() {</span><br/><span class="hl-1">        </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-2">property1</span><span class="hl-1"> = [];</span><br/><span class="hl-1">        </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-2">property1</span><span class="hl-1">.</span><span class="hl-6">push</span><span class="hl-1">(</span><span class="hl-3">&quot;Hello&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">    </span><span class="hl-5">NormalClass</span><span class="hl-1">.</span><span class="hl-2">prototype</span><span class="hl-1">.</span><span class="hl-6">function1</span><span class="hl-1"> = </span><span class="hl-4">function</span><span class="hl-1"> () {</span><br/><span class="hl-1">        </span><span class="hl-7">//...</span><br/><span class="hl-1">        </span><span class="hl-6">doSomething</span><span class="hl-1">();</span><br/><span class="hl-1">    };</span><br/><span class="hl-1">    </span><span class="hl-5">NormalClass</span><span class="hl-1">.</span><span class="hl-2">prototype</span><span class="hl-1">.</span><span class="hl-6">function2</span><span class="hl-1"> = </span><span class="hl-4">function</span><span class="hl-1"> () {</span><br/><span class="hl-1">        </span><span class="hl-7">//...</span><br/><span class="hl-1">        </span><span class="hl-6">doSomething</span><span class="hl-1">();</span><br/><span class="hl-1">    };</span><br/><span class="hl-1">    </span><span class="hl-5">NormalClass</span><span class="hl-1">.</span><span class="hl-2">prototype</span><span class="hl-1">.</span><span class="hl-6">function3</span><span class="hl-1"> = </span><span class="hl-4">function</span><span class="hl-1"> () {</span><br/><span class="hl-1">        </span><span class="hl-7">//...</span><br/><span class="hl-1">        </span><span class="hl-6">doSomething</span><span class="hl-1">();</span><br/><span class="hl-1">    };</span><br/><span class="hl-1">    </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-2">NormalClass</span><span class="hl-1">;</span><br/><span class="hl-1">}());</span>
</code></pre>
<p>So the result would look something like this which represents a ~45% compression, note that the Classname.prototype appears several times.</p>
<pre><code class="language-JavaScript"><span class="hl-4">var</span><span class="hl-1"> </span><span class="hl-2">NormalClass</span><span class="hl-1">=(</span><span class="hl-5">NormalClass</span><span class="hl-1">.</span><span class="hl-2">prototype</span><span class="hl-1">.</span><span class="hl-6">function1</span><span class="hl-1">=</span><span class="hl-4">function</span><span class="hl-1">(){</span><span class="hl-6">doSomething</span><span class="hl-1">()},</span><span class="hl-5">NormalClass</span><span class="hl-1">.</span><span class="hl-2">prototype</span><span class="hl-1">.</span><span class="hl-6">function2</span><span class="hl-1">=</span><span class="hl-4">function</span><span class="hl-1">(){</span><span class="hl-6">doSomething</span><span class="hl-1">()},</span><span class="hl-5">NormalClass</span><span class="hl-1">.</span><span class="hl-2">prototype</span><span class="hl-1">.</span><span class="hl-6">function3</span><span class="hl-1">=</span><span class="hl-4">function</span><span class="hl-1">(){</span><span class="hl-6">doSomething</span><span class="hl-1">()},</span><span class="hl-4">function</span><span class="hl-1">(){</span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-2">property1</span><span class="hl-1">=[],</span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-2">property1</span><span class="hl-1">.</span><span class="hl-6">push</span><span class="hl-1">(</span><span class="hl-3">&quot;Hello&quot;</span><span class="hl-1">)});</span>
</code></pre>
<p>While in this example when using the dynamicProto helper to create the same resulting class and objects there are no references to Classname.prototype and only 1 reference to this.</p>
<pre><code class="language-JavaScript"><span class="hl-4">var</span><span class="hl-1"> </span><span class="hl-2">DynamicClass</span><span class="hl-1"> = </span><span class="hl-7">/** </span><span class="hl-4">@class</span><span class="hl-7"> */</span><span class="hl-1"> (</span><span class="hl-4">function</span><span class="hl-1"> () {</span><br/><span class="hl-1">    </span><span class="hl-4">function</span><span class="hl-1"> </span><span class="hl-6">DynamicClass</span><span class="hl-1">() {</span><br/><span class="hl-1">        </span><span class="hl-6">dynamicProto</span><span class="hl-1">(</span><span class="hl-2">DynamicClass</span><span class="hl-1">, </span><span class="hl-4">this</span><span class="hl-1">, </span><span class="hl-4">function</span><span class="hl-1"> (</span><span class="hl-2">_self</span><span class="hl-1">, </span><span class="hl-2">base</span><span class="hl-1">) {</span><br/><span class="hl-1">            </span><span class="hl-2">_self</span><span class="hl-1">.</span><span class="hl-2">property1</span><span class="hl-1"> = [];</span><br/><span class="hl-1">            </span><span class="hl-2">_self</span><span class="hl-1">.</span><span class="hl-2">property1</span><span class="hl-1">.</span><span class="hl-6">push</span><span class="hl-1">(</span><span class="hl-3">&quot;Hello()&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">            </span><span class="hl-2">_self</span><span class="hl-1">.</span><span class="hl-6">function1</span><span class="hl-1"> = </span><span class="hl-4">function</span><span class="hl-1"> () {</span><br/><span class="hl-1">                </span><span class="hl-7">//...</span><br/><span class="hl-1">                </span><span class="hl-6">doSomething</span><span class="hl-1">();</span><br/><span class="hl-1">            };</span><br/><span class="hl-1">            </span><span class="hl-2">_self</span><span class="hl-1">.</span><span class="hl-6">function2</span><span class="hl-1"> = </span><span class="hl-4">function</span><span class="hl-1"> () {</span><br/><span class="hl-1">                </span><span class="hl-7">//...</span><br/><span class="hl-1">                </span><span class="hl-6">doSomething</span><span class="hl-1">();</span><br/><span class="hl-1">            };</span><br/><span class="hl-1">            </span><span class="hl-2">_self</span><span class="hl-1">.</span><span class="hl-6">function3</span><span class="hl-1"> = </span><span class="hl-4">function</span><span class="hl-1"> () {</span><br/><span class="hl-1">                </span><span class="hl-7">//...</span><br/><span class="hl-1">                </span><span class="hl-6">doSomething</span><span class="hl-1">();</span><br/><span class="hl-1">            };</span><br/><span class="hl-1">        });</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">    </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-2">DynamicClass</span><span class="hl-1">;</span><br/><span class="hl-1">}());</span>
</code></pre>
<p>Which results in the following minified code which is much smaller and represents ~63% compression.</p>
<pre><code class="language-Javascript"><span class="hl-4">var</span><span class="hl-1"> </span><span class="hl-6">DynamicClass</span><span class="hl-1">=</span><span class="hl-4">function</span><span class="hl-1"> </span><span class="hl-6">n</span><span class="hl-1">(){</span><span class="hl-6">dynamicProto</span><span class="hl-1">(</span><span class="hl-2">n</span><span class="hl-1">,</span><span class="hl-4">this</span><span class="hl-1">,</span><span class="hl-4">function</span><span class="hl-1">(</span><span class="hl-2">n</span><span class="hl-1">,</span><span class="hl-2">o</span><span class="hl-1">){</span><span class="hl-2">n</span><span class="hl-1">.</span><span class="hl-2">property1</span><span class="hl-1">=[],</span><span class="hl-2">n</span><span class="hl-1">.</span><span class="hl-2">property1</span><span class="hl-1">.</span><span class="hl-6">push</span><span class="hl-1">(</span><span class="hl-3">&quot;Hello()&quot;</span><span class="hl-1">),</span><span class="hl-2">n</span><span class="hl-1">.</span><span class="hl-6">function1</span><span class="hl-1">=</span><span class="hl-4">function</span><span class="hl-1">(){</span><span class="hl-6">doSomething</span><span class="hl-1">()},</span><span class="hl-2">n</span><span class="hl-1">.</span><span class="hl-6">function2</span><span class="hl-1">=</span><span class="hl-4">function</span><span class="hl-1">(){</span><span class="hl-6">doSomething</span><span class="hl-1">()},</span><span class="hl-2">n</span><span class="hl-1">.</span><span class="hl-6">function3</span><span class="hl-1">=</span><span class="hl-4">function</span><span class="hl-1">(){</span><span class="hl-6">doSomething</span><span class="hl-1">()}})};</span>
</code></pre>
<p> So when looking at the code for NormalClass and DynamicClass, both end up with 1 instance property called <code>property1</code> and the 3 functions <code>function1</code>, <code>function2</code> and <code>function3</code>, in both cases the functions are defined ONLY on the &quot;class&quot; prototype and <code>property1</code> is defined on the instance. So anyone, whether using JavaScript or TypeScript will be able to &quot;extend&quot; either of class without any concerns about overloading instance functions and needing to save any previous method. And you are extending a 3rd party library you no longer have to worry about them changing the implementation as <code>dynamicProto()</code> handles converting overriden instance functions into prototype level ones. Yes, this means that if you don&#39;t override instance function it will continue to be an instance function.</p>

<a href="#when-to-use" id="when-to-use" style="color: inherit; text-decoration: none;">
  <h2>When to use</h2>
</a>
<p>While this helper was created to support better minification for generated code via TypeScript code, it is not limited to only being used from within TypeScript, you can use the helper function directly in the same way as the examples above.</p>
<p>As with including any additional code into your project there are trade offs that you need to make, including if you are looking at this helper, one of the primary items is the overall size of the additional code that you will be including vs the minification gains that you <em>may</em> obtained. This project endeavours to keep it&#39;s impact (bytes) as small as possible while supporting you to create readable and maintainable code that will create a smaller minified output.</p>
<p>In most cases when creating JavaScript to support better minfication, when your code doesn&#39;t expose or provide a lot of public methods or only uses un-minifiable &quot;names&quot; less than 2 times, then you may not see enough potential gains to counteract the additional bytes required from the helper code. However, for any significant project you should.</p>
<p>So at the end of the day, if you are creating JS classes directly you <em>should</em> be able to create a simplier one-off solution that would result in smaller output (total bytes). This is how this project started, but, once we had several of these one-off solutions it made more sense to build it once.</p>

<a href="#performance-optimizations-from-v11" id="performance-optimizations-from-v11" style="color: inherit; text-decoration: none;">
  <h2>Performance optimizations (from v1.1)</h2>
</a>
<p>To aid with execution performance from v1.1.0 (by default) the dynamically generated prototype functions will attempt to directly assign a top-level instance function (on first execution) of each function. This means that subsequent calls to that function will directly call the target instance function and avoid the dynamic function lookup process, this provides a minor performance improvement assists with identifying the called functions during profiling.</p>
<p>To ensure that this does not break inheritance there are 3 prerequisites that must be true before this happens</p>
<ul>
<li>This check is only performed once per instance, per dynamic function</li>
<li>The instance cannot already have an existing instance level function (duh!)</li>
<li>The dynamic proto function MUST be the FIRST prototype level function in the inherited class hierarchy.<ul>
<li>This simply means if a new class extends a class which is using dynamicProto() and it provides it&#39;s own prototype (class level in TypeScript terms) function, then we can&#39;t set an instance level as this would cause the class level function to never get called.</li>
</ul>
</li>
</ul>
<p>You can disable this default behavior by passing a new (optional) 4th argument to the dynamicProto(), the new &#39;options&#39; argument is defined as an interface IDynamicProtoOpts to aid with any future options that may get exposed and has the following values</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>setInstFuncs</td>
<td>Boolean</td>
<td>Should the dynamic prototype attempt to set an instance function for instances that do not already have an function of the same name or have been extended by a class with a (non-dynamic proto) prototype function.</td>
</tr>
</tbody></table>
<blockquote>
<p>Note:</p>
<p>If ANY class in the hierarchy explicitly disables this behavior (passes options object with a value of <code>setInstFuncs: false</code>) to it&#39;s dynamicProto() calls, then that will block ALL functions for all classes, even if a base class explicitly passes an options with it set to true. This enables any class to explicitly disable this behavior should some unknown and unexpected issue occur, if you encounter something that requires this usage then please raised an issue (or provide a PR) so we can resolve for everyone.</p>
</blockquote>

<a href="#included-npm-distribution-formats" id="included-npm-distribution-formats" style="color: inherit; text-decoration: none;">
  <h2>Included NPM distribution formats</h2>
</a>
<p>As part of the build / publish formats via NPM we include the following module formats:</p>
<ul>
<li>dist/esm – Used as the &quot;module&quot; definition for npm, which keeps the bundle as an ES module file, suitable for other bundlers and inclusion as a &lt; amd – Asynchronous Module Definition, used with module loaders like RequireJS</li>
<li>dist/node - Used as the &quot;main&quot; npm entry point for the utility, using the umd format with any third party modules located and included using the <a href="https://nodejs.org/api/modules.html#modules_all_together">Node resolution algorithm</a></li>
</ul>

<a href="#other-included-formats" id="other-included-formats" style="color: inherit; text-decoration: none;">
  <h3>Other included formats</h3>
</a>
<ul>
<li>dist/cjs – CommonJS, suitable for Node and other bundlers
script type=module&gt; tag in modern browsers</li>
<li>dist/iife – A self-executing function, suitable for inclusion as a &lt;script&gt; tag. (If you want to create a bundle for your application, you probably want to use this.)</li>
<li>dist/umd – Universal Module Definition, works as amd, cjs and iife all in one</li>
<li>dist/system – Native format of the SystemJS loader</li>
</ul>

<a href="#typescript-declaration-helper" id="typescript-declaration-helper" style="color: inherit; text-decoration: none;">
  <h2>TypeScript Declaration Helper</h2>
</a>
<p>When using TypeScript to create classes and automatically generate the declaration (*.d.ts) files for your classes you will run into one or more of the following issues :-</p>
<ol>
<li>When you attempt to extend a base class which defines an abstract member (class) function you will get</li>
</ol>
<p><code>error TS2424: Class &#39;ABC&#39; defines instance member function &#39;myFunction&#39;, but extended class &#39;XYZ&#39; defines it as instance member property.</code> 
    * The only solution for this is to define an empty &#39;Stub&#39; method which stops the error, but also generates an unused prototype method in your final code that just takes up space.</p>
<pre><code class="language-typescript"><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-4">abstract</span><span class="hl-1"> </span><span class="hl-4">class</span><span class="hl-1"> </span><span class="hl-5">ABC</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">public</span><span class="hl-1"> </span><span class="hl-6">myFunction</span><span class="hl-1">(</span><span class="hl-2">someArg</span><span class="hl-1">:</span><span class="hl-5">string</span><span class="hl-1">): </span><span class="hl-5">void</span><span class="hl-1"> {</span><br/><span class="hl-1">    }</span><br/><br/><span class="hl-1">    </span><span class="hl-4">public</span><span class="hl-1"> </span><span class="hl-4">abstract</span><span class="hl-1"> </span><span class="hl-6">myFunction2</span><span class="hl-1">(</span><span class="hl-2">theArg</span><span class="hl-1">:</span><span class="hl-5">string</span><span class="hl-1">, ...): </span><span class="hl-5">void</span><span class="hl-1">;</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-4">class</span><span class="hl-1"> </span><span class="hl-5">XYZ</span><span class="hl-1"> </span><span class="hl-4">extends</span><span class="hl-1"> </span><span class="hl-5">ABC</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">public</span><span class="hl-1"> </span><span class="hl-6">myFunction2</span><span class="hl-1">(</span><span class="hl-2">theArg</span><span class="hl-1">:</span><span class="hl-5">string</span><span class="hl-1">, ...): </span><span class="hl-5">void</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-7">// This stub is required otherwise it won&#39;t compile</span><br/><span class="hl-1">        </span><span class="hl-7">// It&#39;s also extra unnecessary code in the final code</span><br/><span class="hl-1">    }</span><br/><br/><span class="hl-1">    </span><span class="hl-4">constructor</span><span class="hl-1">() {</span><br/><span class="hl-1">        </span><span class="hl-6">dynamicProto</span><span class="hl-1">(</span><span class="hl-8">XYZ</span><span class="hl-1">, </span><span class="hl-4">this</span><span class="hl-1">, (</span><span class="hl-2">self</span><span class="hl-1">, </span><span class="hl-2">base</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-2">self</span><span class="hl-1">.</span><span class="hl-6">myFunction</span><span class="hl-1"> = (</span><span class="hl-2">someArg</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">                </span><span class="hl-7">// This implements a member function (on the prototype)</span><br/><span class="hl-1">            };</span><br/><br/><span class="hl-1">            </span><span class="hl-2">self</span><span class="hl-1">.</span><span class="hl-6">myFunction2</span><span class="hl-1"> = (</span><span class="hl-2">theArg</span><span class="hl-1">:</span><span class="hl-5">string</span><span class="hl-1">, ...) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">            };</span><br/><span class="hl-1">        });</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">}</span>
</code></pre>
<p>The above results in the following javascript output for XYZ class where the XYZ.prototype.myFunction2 is obsolete (as it gets replace), unnecessary (for the class to function) and uncompressable bloat for the code</p>
<pre><code class="language-javascript"><span class="hl-4">var</span><span class="hl-1"> </span><span class="hl-8">XYZ</span><span class="hl-1"> = </span><span class="hl-7">/** </span><span class="hl-4">@class</span><span class="hl-7"> */</span><span class="hl-1"> (</span><span class="hl-4">function</span><span class="hl-1"> () {</span><br/><span class="hl-1">    </span><span class="hl-4">function</span><span class="hl-1"> </span><span class="hl-6">XYZ</span><span class="hl-1">() {</span><br/><span class="hl-1">        </span><span class="hl-6">dynamicProto</span><span class="hl-1">(</span><span class="hl-8">XYZ</span><span class="hl-1">, </span><span class="hl-4">this</span><span class="hl-1">, (</span><span class="hl-2">self</span><span class="hl-1">, </span><span class="hl-2">base</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-7">// ... Removed for brevity ...</span><br/><span class="hl-1">            </span><span class="hl-2">self</span><span class="hl-1">.</span><span class="hl-6">myFunction2</span><span class="hl-1"> = (</span><span class="hl-2">theArg</span><span class="hl-1">:</span><span class="hl-5">string</span><span class="hl-1">, ...) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">            };</span><br/><span class="hl-1">        });</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">    </span><span class="hl-5">XYZ</span><span class="hl-1">.</span><span class="hl-2">prototype</span><span class="hl-1">.</span><span class="hl-6">myFunction2</span><span class="hl-1"> = </span><span class="hl-4">function</span><span class="hl-1"> () {</span><br/><span class="hl-1">        </span><span class="hl-7">// This stub is required otherwise it won&#39;t compile</span><br/><span class="hl-1">        </span><span class="hl-7">// It&#39;s also extra unnecessary code in the final code</span><br/><span class="hl-1">    };</span><br/><span class="hl-1">    </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-8">XYZ</span><span class="hl-1">;</span><br/><span class="hl-1">}());</span>
</code></pre>
<ol start="2">
<li>When you are creating a class that you want users to be able to extend (using TypeScript), and you want all of the functions to be declared (in the *.d.ts) as member functions (not properties), so that the extendsion classes (using typescript) can just use the normal <code>super</code> keyword without forcing them to either use dynamicProto() or save / call the instance properties.<ul>
<li>As with above the only solution (for dynamically generated declaration files) would be to defined Stub methods as above.</li>
</ul>
</li>
</ol>
<pre><code class="language-typescript"><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-4">class</span><span class="hl-1"> </span><span class="hl-5">BaseClass</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-7">// A Member function</span><br/><span class="hl-1">    </span><span class="hl-4">public</span><span class="hl-1"> </span><span class="hl-6">myFunction</span><span class="hl-1">(</span><span class="hl-2">someArg</span><span class="hl-1">:</span><span class="hl-5">string</span><span class="hl-1">):</span><span class="hl-5">void</span><span class="hl-1"> { </span><br/><span class="hl-1">        </span><span class="hl-7">// Stub function</span><br/><span class="hl-1">    }</span><br/><br/><span class="hl-1">    </span><span class="hl-7">// A instance member property (which happens to be a function)</span><br/><span class="hl-1">    </span><span class="hl-4">public</span><span class="hl-1"> </span><span class="hl-6">propFunction</span><span class="hl-1">: (</span><span class="hl-2">theArgs</span><span class="hl-1">:</span><span class="hl-5">string</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-5">void</span><span class="hl-1">;</span><br/><br/><span class="hl-1">    </span><span class="hl-4">constructor</span><span class="hl-1">() {</span><br/><span class="hl-1">        </span><span class="hl-6">dynamicProto</span><span class="hl-1">(</span><span class="hl-2">BaseClass</span><span class="hl-1">, </span><span class="hl-4">this</span><span class="hl-1">) (</span><span class="hl-2">self</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-7">// This will create (at runtime) a member functions</span><br/><span class="hl-1">            </span><span class="hl-2">self</span><span class="hl-1">.</span><span class="hl-6">myFunction</span><span class="hl-1"> = (</span><span class="hl-2">someArg</span><span class="hl-1">:</span><span class="hl-5">string</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">            };</span><br/><span class="hl-1">            </span><span class="hl-2">self</span><span class="hl-1">.</span><span class="hl-6">propFunction</span><span class="hl-1"> = (</span><span class="hl-2">theArgs</span><span class="hl-1">:</span><span class="hl-5">string</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">            };</span><br/><span class="hl-1">        });</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-4">class</span><span class="hl-1"> </span><span class="hl-5">NewClass</span><span class="hl-1"> </span><span class="hl-4">extends</span><span class="hl-1"> </span><span class="hl-5">BaseClass</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-7">// This works as TS see&#39;s that the base class has a prototype</span><br/><span class="hl-1">    </span><span class="hl-7">// function (not a property one)</span><br/><span class="hl-1">    </span><span class="hl-4">public</span><span class="hl-1"> </span><span class="hl-6">myFunction</span><span class="hl-1">(</span><span class="hl-2">someArg</span><span class="hl-1">:</span><span class="hl-5">string</span><span class="hl-1">:</span><span class="hl-5">void</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-4">super</span><span class="hl-1">.</span><span class="hl-6">myFunction</span><span class="hl-1">(</span><span class="hl-2">someArg</span><span class="hl-1">);</span><br/><span class="hl-1">    }</span><br/><br/><span class="hl-1">    </span><span class="hl-4">public</span><span class="hl-1"> </span><span class="hl-6">propFunction</span><span class="hl-1">(</span><span class="hl-2">theArgs</span><span class="hl-1">:</span><span class="hl-5">string</span><span class="hl-1">): </span><span class="hl-5">void</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-7">// This doesn&#39;t work as you can&#39;t call super on properties</span><br/><span class="hl-1">        </span><span class="hl-7">// Even though, when the base class is using dynamicProto()</span><br/><span class="hl-1">        </span><span class="hl-7">// this WILL work!</span><br/><span class="hl-1">        </span><span class="hl-4">super</span><span class="hl-1">.</span><span class="hl-6">propFunction</span><span class="hl-1">(</span><span class="hl-2">theArgs</span><span class="hl-1">);</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">}</span>
</code></pre>
<p>So in both of these cases the only workable solutions are either :- </p>
<ul>
<li>Define Stub member functions and live with the code bloat</li>
<li>Just don&#39;t use dynamicProto() and again live with the larger file size.</li>
</ul>
<p>So assuming that you do want to continue using dynamicProto() and don&#39;t want to deal with the additional code bloat, this project includes a simple rollup plugin included in the <code>tools/rollup</code> folder that can be used to remove &quot;tagged&quot; stub code from the resulting output during packaging. </p>
<p>This is a Post processor that removes any code/comments (not just function) that are &quot;tagged&quot; from the resulting output, thus removing the Stub methods and the resulting code bloat from your final packaged code, but still leaving typescript declaration with the final (runtime) member function definition.</p>
<p>The plugin uses the following rules to identify and remove tagged code :-</p>
<ul>
<li>The function must be a instance member function (a prototype level function) where the generated JS looks like &quot;<code>MyClass.prototype.methodName = function () { };</code>&quot;</li>
<li>The <code>tagname</code> must appear either on the line before the function name (pre); on the closing line of the function (post) (NOTE: Not after as TypeScript can drop this from the final output) or within the stub function (enclosed).<pre><code><span class="hl-7">// @DynamicProtoStub</span><br/><span class="hl-5">MyClass</span><span class="hl-1">.</span><span class="hl-2">prototype</span><span class="hl-1">.</span><span class="hl-6">methodName</span><span class="hl-1"> = </span><span class="hl-4">function</span><span class="hl-1"> () {</span><br/><span class="hl-1">};</span><br/><br/><span class="hl-5">MyClass</span><span class="hl-1">.</span><span class="hl-2">prototype</span><span class="hl-1">.</span><span class="hl-6">methodName</span><span class="hl-1"> = </span><span class="hl-4">function</span><span class="hl-1"> () {</span><br/><span class="hl-1">}; </span><span class="hl-7">// @DymanicProtoStub</span><br/><br/><span class="hl-5">MyClass</span><span class="hl-1">.</span><span class="hl-2">prototype</span><span class="hl-1">.</span><span class="hl-6">methodName</span><span class="hl-1"> = </span><span class="hl-4">function</span><span class="hl-1"> () {</span><br/><span class="hl-1">    </span><span class="hl-7">// @DynamicProtoStub</span><br/><span class="hl-1">};</span><br/><br/><span class="hl-5">MyClass</span><span class="hl-1">.</span><span class="hl-2">prototype</span><span class="hl-1">.</span><span class="hl-6">methodName</span><span class="hl-1"> = </span><span class="hl-4">function</span><span class="hl-1"> () {</span><br/><span class="hl-1">    </span><span class="hl-7">/* @DynamicProtoStub </span><br/><span class="hl-7">    * Some other comments</span><br/><span class="hl-7">    */</span><br/><span class="hl-1">};</span>
</code></pre>
</li>
<li>The pre and post tagging comments must be defined using a single line comment &quot;<code>// @DynamicProtoStub</code>&quot; only.</li>
<li>Enclosed tagging comments (within the function definition) may be defined using either single or multi-line comments. But the tagging comment MUST be the first comment within the function.</li>
<li>The function <em>may</em> be prefixed by a typedoc comment of &quot;<code>/** Description @param arg - arg details */</code>&quot; etc, which will be removed if the function is removed. However, it will not remove other prefixed single or multi-line comments.</li>
<li>The <code>tagname</code> must be the first &quot;element&quot;/&quot;word&quot; of any comment with optional leading spaces or tabs only. <ul>
<li>e.g. These would not match &quot;<code>// - @DynamicProtoStub</code>&quot;, &quot;<code>// This is the @DynamicProtoStub</code>&quot;</li>
</ul>
</li>
<li>Tagging comments may contains additional trailing content (after the tagName) and will also be removed<ul>
<li>&quot;<code>// @DynamicProtoStub - Will be removed!</code>&quot;</li>
</ul>
</li>
<li>If the stub function appears to contain any logic, specifically a closing bracket <code>}</code> (including with a comment) will cause the function to not be matched and removed.</li>
<li>A final check is performed after removing all tagged functions for any remaining tags within the result and if any tags are detected it will cause the removal process to throw and fail the conversion. This ensures that if you expected a function to be removed that it has been removed.<ul>
<li>If your build is failing please check that the tagging comments conform to the above rules, failures normally occur because of unexpected formatting changes.</li>
</ul>
</li>
</ul>
<p>Some possible examples</p>
<pre><code class="language-typescript"><span class="hl-7">/**</span><br/><span class="hl-7"> * The typedoc comments</span><br/><span class="hl-7"> */</span><br/><span class="hl-7">// @DynamicProtoStub</span><br/><span class="hl-2">public</span><span class="hl-1"> </span><span class="hl-6">toBeRemoved</span><span class="hl-1">():</span><span class="hl-4">void</span><span class="hl-1"> {</span><br/><span class="hl-1">}</span><br/><span class="hl-1"> </span><br/><span class="hl-7">// @DynamicProtoStub</span><br/><span class="hl-2">public</span><span class="hl-1"> </span><span class="hl-6">toBeRemoved</span><span class="hl-1">():</span><span class="hl-4">void</span><span class="hl-1"> {</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-7">/**</span><br/><span class="hl-7"> * This function does stuff</span><br/><span class="hl-7"> * </span><span class="hl-4">@param</span><span class="hl-7"> </span><span class="hl-2">args</span><span class="hl-7"> - used in the function</span><br/><span class="hl-7"> */</span><br/><span class="hl-2">public</span><span class="hl-1"> </span><span class="hl-6">myFunction</span><span class="hl-1">(</span><span class="hl-2">args</span><span class="hl-1">:</span><span class="hl-2">string</span><span class="hl-1">): </span><span class="hl-4">void</span><span class="hl-1"> {</span><br/><span class="hl-1">    ...</span><br/><span class="hl-1">} </span><span class="hl-7">// @DynamicProtoStub - Function will be removed</span><br/><br/><span class="hl-2">public</span><span class="hl-1"> </span><span class="hl-6">myFunction2</span><span class="hl-1">(): </span><span class="hl-4">void</span><span class="hl-1"> {</span><br/><span class="hl-1">...</span><br/><span class="hl-1">}  </span><span class="hl-7">// @DynamicProtoStub - Function will be removed</span><br/><br/><span class="hl-7">/**</span><br/><span class="hl-7"> * This function does stuff</span><br/><span class="hl-7"> * </span><span class="hl-4">@param</span><span class="hl-7"> </span><span class="hl-2">args</span><span class="hl-7"> - used in the function</span><br/><span class="hl-7"> */</span><br/><span class="hl-2">public</span><span class="hl-1"> </span><span class="hl-6">myFunction</span><span class="hl-1">(</span><span class="hl-2">args</span><span class="hl-1">:</span><span class="hl-2">string</span><span class="hl-1">): </span><span class="hl-4">void</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-7">// @DynamicProtoStub - Function will be removed</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-2">public</span><span class="hl-1"> </span><span class="hl-6">myFunction2</span><span class="hl-1">(): </span><span class="hl-4">void</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-7">/* @DynamicProtoStub </span><br/><span class="hl-7">     * Function will be removed</span><br/><span class="hl-7">     */</span><br/><span class="hl-1">}  </span><br/>
</code></pre>
<p>For clarification the following will NOT match or get removed</p>
<pre><code class="language-typescript"><br/><span class="hl-2">public</span><span class="hl-1"> </span><span class="hl-6">myFunction3</span><span class="hl-1">(): </span><span class="hl-4">void</span><span class="hl-1"> {</span><br/><span class="hl-1">}</span><br/><span class="hl-7">// @DynamicProtoStub - This method will not be removed</span><br/><br/><br/><span class="hl-7">// @DynamicProtoStub - This method will not be removed</span><br/><br/><span class="hl-2">public</span><span class="hl-1"> </span><span class="hl-6">myFunction4</span><span class="hl-1">(): </span><span class="hl-4">void</span><span class="hl-1"> {</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-2">public</span><span class="hl-1"> </span><span class="hl-6">myFunction4</span><span class="hl-1">(): </span><span class="hl-4">void</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-7">/* </span><br/><span class="hl-7">     * @DynamicProtoStub </span><br/><span class="hl-7">     * This will fail because the tag is not the first </span><br/><span class="hl-7">     * &quot;element&quot;/&quot;word&quot; of any comment with optional </span><br/><span class="hl-7">     * leading spaces or tabs only. </span><br/><span class="hl-7">     */</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-2">public</span><span class="hl-1"> </span><span class="hl-6">myFunction4</span><span class="hl-1">(): </span><span class="hl-4">void</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-7">// This is a stub</span><br/><span class="hl-1">    </span><span class="hl-7">/* @DynamicProtoStub </span><br/><span class="hl-7">     * This will fail because the tagging comment is not</span><br/><span class="hl-7">     * the first comment within the function. </span><br/><span class="hl-7">     */</span><br/><span class="hl-1">}</span><br/>
</code></pre>

<a href="#adding-to-you-own-rollupconfigjs" id="adding-to-you-own-rollupconfigjs" style="color: inherit; text-decoration: none;">
  <h3>Adding to you own rollup.config.js</h3>
</a>
<pre><code class="language-javascript"><span class="hl-0">import</span><span class="hl-1"> </span><span class="hl-2">dynamicRemove</span><span class="hl-1"> </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&quot;@microsoft/dynamicproto-js/tools/rollup/node/removedynamic&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-1">  </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">moduleRollupConfig</span><span class="hl-1"> = {</span><br/><span class="hl-1">    </span><span class="hl-2">input:</span><span class="hl-1"> </span><span class="hl-3">`</span><span class="hl-4">${</span><span class="hl-2">inputName</span><span class="hl-4">}</span><span class="hl-3">.js`</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">output:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-2">file:</span><span class="hl-1"> </span><span class="hl-3">`./dist/</span><span class="hl-4">${</span><span class="hl-2">format</span><span class="hl-4">}</span><span class="hl-3">/</span><span class="hl-4">${</span><span class="hl-2">outputName</span><span class="hl-4">}</span><span class="hl-3">.js`</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-2">banner:</span><span class="hl-1"> </span><span class="hl-2">banner</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-2">format:</span><span class="hl-1"> </span><span class="hl-2">format</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">name:</span><span class="hl-1"> </span><span class="hl-3">&quot;OutputName-JS&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-2">extend:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-2">sourcemap:</span><span class="hl-1"> </span><span class="hl-4">true</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-2">plugins:</span><span class="hl-1"> [</span><br/><span class="hl-1">      </span><span class="hl-6">dynamicRemove</span><span class="hl-1">(),</span><br/><span class="hl-1">      </span><span class="hl-6">dynamicRemove</span><span class="hl-1">({ </span><span class="hl-2">tagname:</span><span class="hl-1"> </span><span class="hl-3">&quot;@MyTagName&quot;</span><span class="hl-1"> }),</span><br/><span class="hl-1">      </span><span class="hl-6">nodeResolve</span><span class="hl-1">(),</span><br/><span class="hl-1">      </span><span class="hl-6">uglify</span><span class="hl-1">({</span><br/><span class="hl-1">        </span><span class="hl-2">ie8:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">toplevel:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">compress:</span><span class="hl-1"> {</span><br/><span class="hl-1">          </span><span class="hl-2">passes:</span><span class="hl-9">3</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-2">unsafe:</span><span class="hl-1"> </span><span class="hl-4">true</span><br/><span class="hl-1">        },</span><br/><span class="hl-1">        </span><span class="hl-2">output:</span><span class="hl-1"> {</span><br/><span class="hl-1">          </span><span class="hl-2">preamble:</span><span class="hl-1"> </span><span class="hl-2">banner</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-2">webkit:</span><span class="hl-4">true</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">      })</span><br/><span class="hl-1">    ]</span><br/><span class="hl-1">  };</span><br/>
</code></pre>

<a href="#not-using-rollup" id="not-using-rollup" style="color: inherit; text-decoration: none;">
  <h3>Not using Rollup?</h3>
</a>
<p>Then let us know or simply take the embedded RegEx, and wrap it into your favorite tool and submit a PR. </p>
<p>It should be as simple as :-</p>
<ul>
<li>Load the TypeScript generated JS output source file</li>
<li>Apply the regex using replace to &quot;remove&quot; the tagged code, if the named group tags where detected.</li>
<li>Write the new resulting file to the output path (or stream)</li>
<li>Do the final check for any &quot;remaining&quot; tags, which represents a failed matching</li>
</ul>

<a href="#version-2x" id="version-2x" style="color: inherit; text-decoration: none;">
  <h2>Version 2.x</h2>
</a>
<p>Version 2.x is maintained on the default <a href="https://github.com/microsoft/DynamicProto-JS/tree/main">main branch</a></p>
<blockquote>
<p>Breaking Changes from Version 1.x</p>
<ul>
<li>Removed ES3 / IE8 support</li>
</ul>
</blockquote>

<a href="#browser-support" id="browser-support" style="color: inherit; text-decoration: none;">
  <h3>Browser Support</h3>
</a>
<ul>
<li>ES5 Compliant browsers</li>
</ul>
<table>
<thead>
<tr>
<th><img src="https://raw.githubusercontent.com/alrra/browser-logos/master/src/chrome/chrome_48x48.png" alt="Chrome"></th>
<th><img src="https://raw.githubusercontent.com/alrra/browser-logos/master/src/firefox/firefox_48x48.png" alt="Firefox"></th>
<th><img src="https://raw.githubusercontent.com/hotoo/browser-logos/master/ie9-10/ie9-10_48x48.png" alt="IE9"></th>
<th><img src="https://raw.githubusercontent.com/alrra/browser-logos/master/src/edge/edge_48x48.png" alt="Edge"></th>
<th><img src="https://raw.githubusercontent.com/alrra/browser-logos/master/src/opera/opera_48x48.png" alt="Opera"></th>
<th><img src="https://raw.githubusercontent.com/alrra/browser-logos/master/src/safari/safari_48x48.png" alt="Safari"></th>
</tr>
</thead>
<tbody><tr>
<td>Latest ✔</td>
<td>Latest ✔</td>
<td>9+ Full ✔</td>
<td>Latest ✔</td>
<td>Latest ✔</td>
<td>Latest ✔</td>
</tr>
</tbody></table>

<a href="#previous-versions" id="previous-versions" style="color: inherit; text-decoration: none;">
  <h3>Previous Versions</h3>
</a>
<details>

<summary>Version 1.x</summary>

<p>Version 1.x is maintained on the <a href="https://github.com/microsoft/DynamicProto-JS/tree/master">master branch</a></p>

<a href="#browser-support-1x" id="browser-support-1x" style="color: inherit; text-decoration: none;">
  <h3>Browser Support (1.x)</h3>
</a>
<ul>
<li>ES3 Compliant browsers</li>
</ul>
<table>
<thead>
<tr>
<th><img src="https://raw.githubusercontent.com/alrra/browser-logos/master/src/chrome/chrome_48x48.png" alt="Chrome"></th>
<th><img src="https://raw.githubusercontent.com/alrra/browser-logos/master/src/firefox/firefox_48x48.png" alt="Firefox"></th>
<th><img src="https://raw.githubusercontent.com/hotoo/browser-logos/master/ie9-10/ie9-10_48x48.png" alt="IE8"></th>
<th><img src="https://raw.githubusercontent.com/alrra/browser-logos/master/src/edge/edge_48x48.png" alt="Edge"></th>
<th><img src="https://raw.githubusercontent.com/alrra/browser-logos/master/src/opera/opera_48x48.png" alt="Opera"></th>
<th><img src="https://raw.githubusercontent.com/alrra/browser-logos/master/src/safari/safari_48x48.png" alt="Safari"></th>
</tr>
</thead>
<tbody><tr>
<td>Latest ✔</td>
<td>Latest ✔</td>
<td>8+ Full ✔</td>
<td>Latest ✔</td>
<td>Latest ✔</td>
<td>Latest ✔</td>
</tr>
</tbody></table>

<a href="#es3ie8-compatibility" id="es3ie8-compatibility" style="color: inherit; text-decoration: none;">
  <h2>ES3/IE8 Compatibility</h2>
</a>
<p>Version 1.x ONLY, 2.x DOES NOT support ES3/IE8</p>
<p>As a library there are numerous users which cannot control the browsers that their customers use. As such we need to ensure that this library continues to &quot;work&quot; and does not break the JS execution when loaded by an older browser. While it would be ideal to just not support IE8 and older generation (ES3) browsers there are numerous large customers/users that continue to require pages to &quot;work&quot; and as noted they may or cannot control which browser that their end users choose to use.</p>
<p>As part of enabling ES3/IE8 support we have set the <code>tsconfig.json</code> to ES3 and <code>uglify</code> settings in <code>rollup.config.js</code> transformations to support ie8. This provides a first level of support which blocks anyone from adding unsupported ES3 features to the code and enables the generated javascript to be validily parsed in an ES3+ environment.</p>
<p>Ensuring that the generated code is compatible with ES3 is only the first step, JS parsers will still parse the code when an unsupport core function is used, it will just fail or throw an exception at runtime. Therefore, we also need to require/use polyfil implementations or helper functions to handle those scenarios.</p>

<a href="#es3ie8-features-solutions-workarounds-and-polyfill-style-helper-functions" id="es3ie8-features-solutions-workarounds-and-polyfill-style-helper-functions" style="color: inherit; text-decoration: none;">
  <h3>ES3/IE8 Features, Solutions, Workarounds and Polyfill style helper functions</h3>
</a>
<p>This table does not attempt to include ALL of the ES3 unsupported features, just the currently known functions that where being used at the time or writing. You are welcome to contribute to provide additional helpers, workarounds or documentation of values that should not be used.</p>
<table>
<thead>
<tr>
<th>Feature</th>
<th>Description</th>
<th>Usage</th>
</tr>
</thead>
<tbody><tr>
<td><code>Object.keys()</code></td>
<td>Not provided by ES3 and not used</td>
<td>N/A</td>
</tr>
<tr>
<td>ES5+ getters/setters<br><code>Object.defineProperty(...)</code></td>
<td>Not provided by ES3 and not used</td>
<td>N/A</td>
</tr>
<tr>
<td><code>Object.create(protoObj, [descriptorSet]?)</code></td>
<td>Not provided by ES3 and not used</td>
<td>N/A</td>
</tr>
<tr>
<td><code>Object.defineProperties()</code></td>
<td>Not provided by ES3 and not used</td>
<td>N/A</td>
</tr>
<tr>
<td><code>Object.getOwnPropertyNames(obj)</code></td>
<td>Not provided by ES3 and not used</td>
<td><code>_forEachProp(target:any, callback: (name: string) =&gt; void)</code></td>
</tr>
<tr>
<td><code>Object.getPrototypeOf(obj)</code></td>
<td>Not provided by ES3 and not used</td>
<td><code>_getObjProto(target:any)</code></td>
</tr>
<tr>
<td><code>Object.getOwnPropertyDescriptor(obj)</code></td>
<td>Not provided by ES3 and not used</td>
<td>N/A</td>
</tr>
<tr>
<td><code>Object.preventExtensions(obj)</code></td>
<td>Not provided by ES3 and not used</td>
<td>N/A</td>
</tr>
<tr>
<td><code>Object.isExtensible(obj)</code></td>
<td>Not provided by ES3 and not used</td>
<td>N/A</td>
</tr>
<tr>
<td><code>Object.seal(obj)</code></td>
<td>Not provided by ES3 and not used</td>
<td>N/A</td>
</tr>
<tr>
<td><code>Object.isSealed(obj)</code></td>
<td>Not provided by ES3 and not used</td>
<td>N/A</td>
</tr>
<tr>
<td><code>Object.freeze(obj)</code></td>
<td>Not provided by ES3 and not used</td>
<td>N/A</td>
</tr>
<tr>
<td><code>Object.isFrozen(obj)</code></td>
<td>Not provided by ES3 and not used</td>
<td>N/A</td>
</tr>
</tbody></table>
</details>


<a href="#contributing" id="contributing" style="color: inherit; text-decoration: none;">
  <h2>Contributing</h2>
</a>
<p>Read our <a href="./CONTRIBUTING.md">contributing guide</a> to learn about our development process, how to propose bugfixes and improvements, and how to build and test your changes to Application Insights.</p>

<a href="#trademarks" id="trademarks" style="color: inherit; text-decoration: none;">
  <h2>Trademarks</h2>
</a>
<p>This project may contain trademarks or logos for projects, products, or services. Authorized use of Microsoft trademarks or logos is subject to and must follow <a href="https://www.microsoft.com/en-us/legal/intellectualproperty/trademarks/usage/general">Microsoft’s Trademark &amp; Brand Guidelines</a>. Use of Microsoft trademarks or logos in modified versions of this project must not cause confusion or imply Microsoft sponsorship. Any use of third-party trademarks or logos are subject to those third-party’s policies.</p>

<a href="#license" id="license" style="color: inherit; text-decoration: none;">
  <h2>License</h2>
</a>
<p><a href="LICENSE">MIT</a></p>
</div></div>
<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
<div class="tsd-navigation settings">
<details class="tsd-index-accordion"><summary class="tsd-accordion-summary">
<h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M4.93896 8.531L12 15.591L19.061 8.531L16.939 6.409L12 11.349L7.06098 6.409L4.93896 8.531Z" fill="var(--color-text)"></path></svg> Settings</h3></summary>
<div class="tsd-accordion-details">
<div class="tsd-filter-visibility">
<h4 class="uppercase">Member Visibility</h4><form>
<ul id="tsd-filter-options">
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li>
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li></ul></form></div>
<div class="tsd-theme-toggle">
<h4 class="uppercase">Theme</h4><select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div>
<nav class="tsd-navigation primary">
<details class="tsd-index-accordion" open><summary class="tsd-accordion-summary">
<h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M4.93896 8.531L12 15.591L19.061 8.531L16.939 6.409L12 11.349L7.06098 6.409L4.93896 8.531Z" fill="var(--color-text)"></path></svg> Modules</h3></summary>
<div class="tsd-accordion-details">
<ul>
<li class="current selected"><a href="modules.html">@microsoft/dynamicproto-<wbr/>js</a>
<ul>
<li class="tsd-kind-namespace"><a href="modules/default.html">default</a></li></ul></li></ul></div></details></nav>
<nav class="tsd-navigation secondary menu-sticky">
<ul>
<li class="tsd-kind-type-alias"><a href="types/DynamicProtoDelegate.html" class="tsd-index-link"><svg class="tsd-kind-icon" width="24" height="24" viewBox="0 0 24 24"><rect fill="var(--color-icon-background)" stroke="var(--color-ts)" stroke-width="1.5" x="1" y="1" width="22" height="22" rx="6" id="icon-4194304-path"></rect><path d="M11.31 16V8.224H8.91V7.24H14.79V8.224H12.39V16H11.31Z" fill="var(--color-text)" id="icon-4194304-text"></path></svg>Dynamic<wbr/>Proto<wbr/>Delegate</a></li>
<li class="tsd-kind-interface"><a href="interfaces/IDynamicProtoOpts.html" class="tsd-index-link"><svg class="tsd-kind-icon" width="24" height="24" viewBox="0 0 24 24"><rect fill="var(--color-icon-background)" stroke="var(--color-ts-interface)" stroke-width="1.5" x="1" y="1" width="22" height="22" rx="6" id="icon-256-path"></rect><path d="M9.51 16V15.016H11.298V8.224H9.51V7.24H14.19V8.224H12.402V15.016H14.19V16H9.51Z" fill="var(--color-text)" id="icon-256-text"></path></svg>IDynamic<wbr/>Proto<wbr/>Opts</a></li>
<li class="tsd-kind-function"><a href="functions/default-1.html" class="tsd-index-link"><svg class="tsd-kind-icon" width="24" height="24" viewBox="0 0 24 24"><rect fill="var(--color-icon-background)" stroke="var(--color-ts-function)" stroke-width="1.5" x="1" y="1" width="22" height="22" rx="6" id="icon-64-path"></rect><path d="M9.39 16V7.24H14.55V8.224H10.446V11.128H14.238V12.112H10.47V16H9.39Z" fill="var(--color-text)" id="icon-64-text"></path></svg>default</a></li></ul></nav></div></div>
<div class="container tsd-generator">
<p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div>
<div class="overlay"></div><script src="assets/main.js"></script></body></html>